# Very Simple Malware Detector


## Objective

This repository contains the intermediate project for the [ML Zoomcamp](https://github.com/alexeygrigorev/mlbookcamp-code) course provided by [DataTalks.Club](https://datatalks.club/).


## Context

The objective of this project is to develop a very simple malware detector for Windows Portable Executables (PE).


## Dataset

The dataset is read from a CSV file downloaded from Kaggle at this [link](https://www.kaggle.com/code/aashkatrivedi/malware-detector). It contains static analysis data (Top-1000 imported functions) extracted from the 'pe_imports' elements of Cuckoo Sandbox reports. PE malware examples were downloaded from [virusshare.com](https://virusshare.com). PE goodware examples were downloaded from [portableapps.com](https://portableapps.com) and from Windows 7 x86 directories.


### Deployment

The MLOps pipeline is fully dockerised and can be easily deployed via the following steps:

1. Clone the `very-simple-malware-detector` repository locally:

    ```bash
    $ git clone https://github.com/Peco602/very-simple-malware-detector.git
    ```

2. Install the pre-requisites necessary to run the pipeline:

    ```bash
    $ cd very-simple-malware-detector
    $ sudo apt install make
    $ make prerequisites
    ```

    It is also suggested to add the current user to the `docker` group to avoid running the next steps as `sudo`:

    ```bash
    $ sudo groupadd docker
    $ sudo usermod -aG docker $USER
    ```

    then, logout and log back in so that the group membership is re-evaluated.

3. [*Optional*] Configure the development evironment:

    ```bash
    $ make setup
    ```

    This is required to perform further development and testing on the pipeline.

4. Pull the Docker images:

    ```
    $ make pull
    ```

5. Launch the service:

    ```
    $ make run
    ```

### Testing

Execute the following commands to send sample to be checked by the service:

```bash
$ curl -F "sample=@./data/nslookup.exe" localhost:8080/predict
{"Outcome":"Benign"}
$ curl -F "sample=@./data/ping.exe" localhost:8080/predict
{"Outcome":"Benign"}
$ curl -F "sample=@./data/Bonzify.exe" localhost:8080/predict
{"Outcome":"Malware"}
```


### Disposal

The service can be disposed via:

```
$ make kill
```


## GitHub Actions

- **Continuous Integration**: On every push and pull request on `main` and `dev` branches, the Docker images are built, tested and then pushed to DockerHub.


## Applied technologies

| Name | Scope |
| --- | --- |
| Jupyter Notebooks | Exploratory data analysis and pipeline prototyping. |
| Docker | Application containerization. |
| Docker-Compose | Multi-container Docker applications definition and running. |
| Flask | Web server. |
| pytest | Python unit testing suite. |
| pylint | Python static code analysis. |
| black | Python code formatting. |
| isort | Python import sorting. |
| Pre-Commit Hooks | Simple code issue identification before submission. |
| GitHub Actions | CI/CD pipelines. |


## Disclaimer

This prediction service has been developed as the intermediate project for the ML Zoomcamp course from DataTalks.Club. It cannot be considered a substitute for a professional anti-malware. Please note the repository contains the `Bonzify.exe` sample which is **malicious** and must be handled with care.
